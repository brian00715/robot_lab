# VelocityPose è¯¾ç¨‹å­¦ä¹ å››é˜¶æ®µè¯¦ç»†é…ç½®æŒ‡å—

## ğŸ“š ç›®å½•

1. [æ€»ä½“æ¶æ„](#æ€»ä½“æ¶æ„)
2. [Stage 1: åŸºç¡€è¿åŠ¨é˜¶æ®µ](#stage-1-åŸºç¡€è¿åŠ¨é˜¶æ®µ-å·²ç¦ç”¨)
3. [Stage 2: å°èŒƒå›´å§¿æ€æ§åˆ¶](#stage-2-å°èŒƒå›´å§¿æ€æ§åˆ¶-å·²ç¦ç”¨)
4. [Stage 3: ä¸­ç­‰èŒƒå›´å§¿æ€æ§åˆ¶](#stage-3-ä¸­ç­‰èŒƒå›´å§¿æ€æ§åˆ¶-å½“å‰èµ·å§‹é˜¶æ®µ)
5. [Stage 4: æœ€å¤§èŒƒå›´å§¿æ€æ§åˆ¶](#stage-4-æœ€å¤§èŒƒå›´å§¿æ€æ§åˆ¶)
6. [å‚æ•°å¯¹æ¯”è¡¨](#å‚æ•°å¯¹æ¯”è¡¨)
7. [è®­ç»ƒç­–ç•¥å»ºè®®](#è®­ç»ƒç­–ç•¥å»ºè®®)

---

## æ€»ä½“æ¶æ„

### è¯¾ç¨‹å­¦ä¹ ç†å¿µ

è¯¾ç¨‹å­¦ä¹ ï¼ˆCurriculum Learningï¼‰æ˜¯ä¸€ç§æ¸è¿›å¼è®­ç»ƒç­–ç•¥ï¼Œæ¨¡ä»¿äººç±»å­¦ä¹ è¿‡ç¨‹ï¼š
1. **ä»ç®€å•åˆ°å¤æ‚**ï¼šå…ˆå­¦åŸºç¡€æŠ€èƒ½ï¼Œå†å­¦é«˜çº§æŠ€èƒ½
2. **æ¸è¿›å¼éš¾åº¦**ï¼šé€æ­¥å¢åŠ ä»»åŠ¡éš¾åº¦
3. **åŠ¨æ€è°ƒæ•´**ï¼šæ ¹æ®è®­ç»ƒè¿›åº¦è‡ªåŠ¨è°ƒæ•´å‚æ•°

### VelocityPose ä»»åŠ¡çš„æŒ‘æˆ˜

VelocityPose æ˜¯ä¸€ä¸ª **7D å¤æ‚æ§åˆ¶ä»»åŠ¡**ï¼š
- **è¿åŠ¨æ§åˆ¶** (3D): çº¿é€Ÿåº¦ x/y, è§’é€Ÿåº¦ z
- **å§¿æ€æ§åˆ¶** (4D): é«˜åº¦, roll, pitch, yaw

**éš¾ç‚¹**ï¼š
- è¿åŠ¨å’Œå§¿æ€éœ€è¦åŒæ—¶æ§åˆ¶
- å¤§èŒƒå›´å§¿æ€å˜åŒ–ï¼ˆÂ±30Â° roll, Â±15cm heightï¼‰
- éœ€è¦ä¿æŒæ­¥æ€ç¨³å®šæ€§å’Œèƒ½é‡æ•ˆç‡

### è¯¾ç¨‹å­¦ä¹ ç­–ç•¥

æˆ‘ä»¬é‡‡ç”¨ **4-Stage æ¸è¿›å¼ç­–ç•¥**ï¼š

```
Stage 1 (å·²ç¦ç”¨) â†’ Stage 2 (å·²ç¦ç”¨) â†’ Stage 3 (èµ·å§‹) â†’ Stage 4 (æœ€ç»ˆ)
çº¯è¿åŠ¨æ§åˆ¶         å°èŒƒå›´å§¿æ€           ä¸­ç­‰èŒƒå›´         æœ€å¤§èŒƒå›´
    â†“                   â†“                  â†“               â†“
å›ºå®špose=0      Â±3cm, Â±8Â° roll    Â±10cm, Â±20Â° roll  Â±15cm, Â±30Â° roll
æ— å§¿æ€å¥–åŠ±       å®½æ¾tolerance      ä¸¥æ ¼tolerance    ä¸¥æ ¼+é«˜æƒé‡
```

**å½“å‰è®­ç»ƒ**ï¼š**è·³è¿‡ Stage 1 å’Œ 2ï¼Œç›´æ¥ä» Stage 3 å¼€å§‹**
- åŸå› ï¼šé¢„è®­ç»ƒæ¨¡å‹å·²ç»æŒæ¡åŸºç¡€è¿åŠ¨
- ç›®æ ‡ï¼šä¸“æ³¨äºç²¾ç¡®å§¿æ€æ§åˆ¶çš„å­¦ä¹ 

---

## Stage 1: åŸºç¡€è¿åŠ¨é˜¶æ®µ (å·²ç¦ç”¨)

### ğŸ“Š åŸºæœ¬ä¿¡æ¯

| å±æ€§ | å€¼ |
|------|-----|
| **è¿­ä»£èŒƒå›´** | 0 - 20,000 iterations |
| **è®­ç»ƒæ—¶é•¿** | ~10-15 å°æ—¶ (4096 envs) |
| **çŠ¶æ€** | âŒ **DISABLED** (å·²ç¦ç”¨) |
| **ç›®çš„** | å­¦ä¹ åŸºç¡€å››è¶³æ­¥æ€å’Œé€Ÿåº¦æ§åˆ¶ |

### ğŸ¯ è®­ç»ƒç›®æ ‡

1. **åŸºç¡€è¿åŠ¨èƒ½åŠ›**ï¼š
   - å‰è¿›ã€åé€€ã€å·¦å³å¹³ç§»
   - åŸåœ°æ—‹è½¬
   - ç»„åˆè¿åŠ¨ï¼ˆå¦‚è½¬å¼¯æ—¶å‰è¿›ï¼‰

2. **æ­¥æ€ç¨³å®šæ€§**ï¼š
   - å­¦ä¹ ç¨³å®šçš„å››è¶³æ­¥æ€
   - é¿å…æ‘”å€’å’Œéœ‡è¡
   - ä¿æŒèº«ä½“å¹³è¡¡

3. **é€Ÿåº¦è·Ÿè¸ª**ï¼š
   - çº¿é€Ÿåº¦è·Ÿè¸ª (vx, vy)
   - è§’é€Ÿåº¦è·Ÿè¸ª (Ï‰z)

### ğŸ“ å‘½ä»¤èŒƒå›´é…ç½®

```python
# Stage 1: å›ºå®šå§¿æ€ï¼Œåªå­¦ä¹ é€Ÿåº¦æ§åˆ¶
height_range = (default_height, default_height)  # 0.35m (å›ºå®š)
roll_range = (0.0, 0.0)    # 0Â° (å›ºå®š)
pitch_range = (0.0, 0.0)   # 0Â° (å›ºå®š)
yaw_range = (0.0, 0.0)     # 0Â° (å›ºå®š)

# é€Ÿåº¦å‘½ä»¤èŒƒå›´ï¼ˆæ­£å¸¸ï¼‰
lin_vel_x = (-1.0, 1.0)  # Â±1.0 m/s
lin_vel_y = (-1.0, 1.0)  # Â±1.0 m/s
ang_vel_z = (-1.0, 1.0)  # Â±1.0 rad/s
```

### ğŸ å¥–åŠ±å‡½æ•°é…ç½®

#### å¯ç”¨çš„å¥–åŠ±é¡¹ï¼š
```python
# é€Ÿåº¦è·Ÿè¸ªå¥–åŠ±ï¼ˆé«˜æƒé‡ï¼‰
track_lin_vel_xy_exp:  weight = 6.0
track_ang_vel_z_exp:   weight = 3.0

# å§¿æ€å¥–åŠ±ï¼ˆå®Œå…¨ç¦ç”¨ï¼‰
track_height_exp:       weight = 0.0  # âŒ ç¦ç”¨
track_orientation_exp:  weight = 0.0  # âŒ ç¦ç”¨

# æ­¥æ€è´¨é‡å¥–åŠ±
feet_air_time:         weight = 0.1
feet_air_time_variance: weight = -1.0
action_rate_l2:        weight = -0.01

# å¹³æ»‘æ€§å¥–åŠ±
base_lin_acc_xy_l2:    weight = -0.02
base_ang_acc_z_l2:     weight = -0.01
joint_acc_l2:          weight = -2.5e-7
```

### ğŸ“ˆ é¢„æœŸè®­ç»ƒæ›²çº¿

```
Iteration     Total Reward    Lin Vel Reward    Stability
0-2000        5-10           0.3-0.5           ä½ï¼ˆå­¦ä¹ æ­¥æ€ï¼‰
2000-5000     10-15          0.6-0.8           ä¸­
5000-10000    15-20          0.8-0.9           é«˜
10000-20000   20-25          0.9-0.95          éå¸¸é«˜
```

### ğŸš« ä¸ºä»€ä¹ˆç¦ç”¨ Stage 1ï¼Ÿ

**åŸå› **ï¼š
1. **å·²æœ‰é¢„è®­ç»ƒæ¨¡å‹**ï¼šä» Velocity ä»»åŠ¡ç»§æ‰¿çš„æ¨¡å‹å·²ç»æŒæ¡åŸºç¡€è¿åŠ¨
2. **è®­ç»ƒæ—¶é—´é•¿**ï¼šStage 1 éœ€è¦ 10-15 å°æ—¶ï¼Œä½†å¯¹å§¿æ€æ§åˆ¶å¸®åŠ©æœ‰é™
3. **ç›´æ¥èµ·æ•ˆ**ï¼šè·³åˆ° Stage 3 å¯ä»¥ç›´æ¥å­¦ä¹ å§¿æ€æ§åˆ¶

**å®éªŒè¯æ˜**ï¼šç›´æ¥ä» Stage 3 å¼€å§‹è®­ç»ƒï¼Œæœºå™¨ç‹—ä»èƒ½ä¿æŒç¨³å®šæ­¥æ€

---

## Stage 2: å°èŒƒå›´å§¿æ€æ§åˆ¶ (å·²ç¦ç”¨)

### ğŸ“Š åŸºæœ¬ä¿¡æ¯

| å±æ€§ | å€¼ |
|------|-----|
| **è¿­ä»£èŒƒå›´** | 0 - 10,000 iterations (åŸ 20,000 - 30,000) |
| **è®­ç»ƒæ—¶é•¿** | ~5-8 å°æ—¶ (4096 envs) |
| **çŠ¶æ€** | âŒ **DISABLED** (å·²ç¦ç”¨ï¼Œä½†å¯å¯ç”¨) |
| **ç›®çš„** | å¼•å…¥å°èŒƒå›´å§¿æ€å˜åŒ–ï¼Œå­¦ä¹ åŸºç¡€å§¿æ€æ§åˆ¶ |

### ğŸ¯ è®­ç»ƒç›®æ ‡

1. **å¼•å…¥é«˜åº¦æ§åˆ¶**ï¼š
   - å­¦ä¹ è°ƒæ•´èº«ä½“é«˜åº¦ï¼ˆÂ±3cm å°èŒƒå›´ï¼‰
   - ä¿æŒé«˜åº¦ç¨³å®šæ€§

2. **å¼•å…¥æ¨ªæ»šæ§åˆ¶**ï¼š
   - å­¦ä¹ èº«ä½“å€¾æ–œï¼ˆÂ±8Â° å°è§’åº¦ï¼‰
   - ä¿æŒæ¨ªæ»šå¹³è¡¡

3. **ä¿æŒé€Ÿåº¦è·Ÿè¸ª**ï¼š
   - åœ¨å§¿æ€å˜åŒ–æ—¶ä»èƒ½è·Ÿè¸ªé€Ÿåº¦
   - ä¸å› å§¿æ€å˜åŒ–è€Œå¤±å»å¹³è¡¡

### ğŸ“ å‘½ä»¤èŒƒå›´é…ç½®

```python
# Stage 2: å°èŒƒå›´å§¿æ€å˜åŒ–
height_range = (0.30, 0.36)  # Â±3cm (35cm Â± 3cmï¼Œå¯¹äº Go2)
roll_range = (-0.14, 0.14)    # Â±8Â° (0.14 rad)
pitch_range = (0.0, 0.0)      # 0Â° (ä»å›ºå®š)
yaw_range = (0.0, 0.0)        # 0Â° (ä»å›ºå®š)

# é€Ÿåº¦å‘½ä»¤èŒƒå›´ï¼ˆä¿æŒä¸å˜ï¼‰
lin_vel_x = (-1.0, 1.0)
lin_vel_y = (-1.0, 1.0)
ang_vel_z = (-1.0, 1.0)
```

### ğŸ å¥–åŠ±å‡½æ•°é…ç½®

#### å¥–åŠ±å‚æ•°ï¼ˆå®½æ¾å®¹å¿åº¦ï¼‰ï¼š
```python
# é«˜åº¦è·Ÿè¸ªå¥–åŠ±ï¼ˆé‡æ–°å¯ç”¨ï¼Œå®½æ¾æ ‡å‡†ï¼‰
track_height_exp:
    weight = 2.0          # ä¸­ç­‰æƒé‡
    std = 0.5             # å®½æ¾å®¹å¿åº¦ï¼š50cm è¯¯å·® â†’ 37% å¥–åŠ±
    # å¥–åŠ±æ›²çº¿ï¼š
    #   Â±3cm  â†’ 94.1% reward
    #   Â±5cm  â†’ 90.5% reward
    #   Â±10cm â†’ 81.9% reward

# å§¿æ€è·Ÿè¸ªå¥–åŠ±ï¼ˆé‡æ–°å¯ç”¨ï¼Œå®½æ¾æ ‡å‡†ï¼‰
track_orientation_exp:
    weight = 1.0          # ä¸­ç­‰æƒé‡
    std = 0.707           # å®½æ¾å®¹å¿åº¦ï¼š40Â° è¯¯å·® â†’ 37% å¥–åŠ±
    # å¥–åŠ±æ›²çº¿ï¼š
    #   Â±5Â°   â†’ 88.4% reward
    #   Â±8Â°   â†’ 83.2% reward
    #   Â±10Â°  â†’ 78.1% reward
```

### ğŸ“ˆ é¢„æœŸè®­ç»ƒæ›²çº¿

```
Iteration     Height Error    Roll Error    Total Reward
0-1000        Â±8-15cm        Â±15-25Â°       15-18
1000-3000     Â±5-10cm        Â±10-15Â°       18-22
3000-6000     Â±3-5cm         Â±5-10Â°        22-26
6000-10000    Â±2-4cm         Â±3-8Â°         26-30
```

### ğŸ”„ ä¸ºä»€ä¹ˆå¯ä»¥å¯ç”¨ Stage 2ï¼Ÿ

**ä¼˜ç‚¹**ï¼š
- **å¹³æ»‘è¿‡æ¸¡**ï¼šä»å°èŒƒå›´åˆ°å¤§èŒƒå›´æ›´ç¨³å®š
- **å‡å°‘éœ‡è¡**ï¼šé¿å…ä¸€å¼€å§‹å°±ç»™äºˆå¤§èŒƒå›´å§¿æ€å‘½ä»¤
- **æ›´å¥½æ”¶æ•›**ï¼šè®­ç»ƒæ›²çº¿æ›´å¹³æ»‘

**ç¼ºç‚¹**ï¼š
- **è®­ç»ƒæ—¶é—´é•¿**ï¼šéœ€è¦é¢å¤– 5-8 å°æ—¶
- **æ•ˆæœæœ‰é™**ï¼šå¯¹æœ€ç»ˆç²¾åº¦æå‡ä¸æ˜æ˜¾

**å»ºè®®**ï¼š
- âœ… å¦‚æœæ˜¯å…¨æ–°è®­ç»ƒï¼ˆæ— é¢„è®­ç»ƒæ¨¡å‹ï¼‰ï¼š**å¯ç”¨ Stage 2**
- âŒ å¦‚æœæ˜¯ç»§ç»­è®­ç»ƒï¼ˆæœ‰é¢„è®­ç»ƒæ¨¡å‹ï¼‰ï¼š**ç¦ç”¨ Stage 2**

---

## Stage 3: ä¸­ç­‰èŒƒå›´å§¿æ€æ§åˆ¶ (å½“å‰èµ·å§‹é˜¶æ®µ)

### ğŸ“Š åŸºæœ¬ä¿¡æ¯

| å±æ€§ | å€¼ |
|------|-----|
| **è¿­ä»£èŒƒå›´** | 0 - 15,000 iterations (åŸ 30,000 - 45,000) |
| **è®­ç»ƒæ—¶é•¿** | ~8-12 å°æ—¶ (4096 envs) |
| **çŠ¶æ€** | âœ… **ACTIVE** (å½“å‰èµ·å§‹é˜¶æ®µ) |
| **ç›®çš„** | å­¦ä¹ ä¸­ç­‰èŒƒå›´ç²¾ç¡®å§¿æ€æ§åˆ¶ |

### ğŸ¯ è®­ç»ƒç›®æ ‡

1. **ä¸­ç­‰é«˜åº¦æ§åˆ¶**ï¼š
   - å­¦ä¹  Â±10cm é«˜åº¦å˜åŒ–
   - ç²¾ç¡®é«˜åº¦è·Ÿè¸ªï¼ˆç›®æ ‡ï¼šÂ±3-5cm è¯¯å·®ï¼‰

2. **ä¸­ç­‰å§¿æ€æ§åˆ¶**ï¼š
   - Roll: Â±20Â° èŒƒå›´
   - Pitch/Yaw: Â±12Â° èŒƒå›´
   - ç²¾ç¡®å§¿æ€è·Ÿè¸ªï¼ˆç›®æ ‡ï¼šÂ±5-10Â° è¯¯å·®ï¼‰

3. **åè°ƒæ§åˆ¶**ï¼š
   - åŒæ—¶æ§åˆ¶é€Ÿåº¦å’Œå§¿æ€
   - åœ¨å§¿æ€å˜åŒ–æ—¶ä¿æŒæ­¥æ€è´¨é‡

### ğŸ“ å‘½ä»¤èŒƒå›´é…ç½®

```python
# Stage 3: ä¸­ç­‰èŒƒå›´å§¿æ€å˜åŒ–
height_range = (0.23, 0.43)    # Â±10cm (33cm Â± 10cm)
roll_range = (-0.349, 0.349)   # Â±20Â° (0.349 rad)
pitch_range = (-0.21, 0.21)    # Â±12Â° (0.21 rad)
yaw_range = (-0.21, 0.21)      # Â±12Â° (0.21 rad)

# é€Ÿåº¦å‘½ä»¤èŒƒå›´ï¼ˆä¿æŒä¸å˜ï¼‰
lin_vel_x = (-1.0, 1.0)
lin_vel_y = (-1.0, 1.0)
ang_vel_z = (-1.0, 1.0)
```

### ğŸ å¥–åŠ±å‡½æ•°é…ç½®

#### å¥–åŠ±å‚æ•°ï¼ˆä¸¥æ ¼æ ‡å‡† + ä¸­ç­‰æƒé‡ï¼‰ï¼š
```python
# é«˜åº¦è·Ÿè¸ªå¥–åŠ±ï¼ˆä¸¥æ ¼æ ‡å‡†ï¼Œæƒé‡æå‡ï¼‰
track_height_exp:
    weight = 3.0              # â†‘ æå‡ 50% (ä» 2.0)
    std = 0.224               # â†“ æ”¶ç´§ 55% (ä» 0.5m)
    
    # å¥–åŠ±æ›²çº¿å˜åŒ–ï¼š
    # è¯¯å·®    Stage 2 â†’ Stage 3    å˜åŒ–
    # Â±2cm    96.1%   â†’ 91.4%      -4.7%
    # Â±5cm    90.5%   â†’ 80.0%      -10.5%
    # Â±10cm   81.9%   â†’ 63.9%      -18.0%
    # Â±15cm   74.1%   â†’ 51.1%      -23.0%

# å§¿æ€è·Ÿè¸ªå¥–åŠ±ï¼ˆä¸¥æ ¼æ ‡å‡†ï¼Œæƒé‡æå‡ï¼‰
track_orientation_exp:
    weight = 1.5              # â†‘ æå‡ 50% (ä» 1.0)
    std = 0.316               # â†“ æ”¶ç´§ 55% (ä» 0.707 rad)
    
    # å¥–åŠ±æ›²çº¿å˜åŒ–ï¼š
    # è¯¯å·®    Stage 2 â†’ Stage 3    å˜åŒ–
    # Â±2Â°     95.2%   â†’ 89.5%      -5.7%
    # Â±5Â°     88.4%   â†’ 75.9%      -12.5%
    # Â±10Â°    78.1%   â†’ 57.6%      -20.5%
    # Â±15Â°    69.1%   â†’ 43.7%      -25.4%
```

### ğŸ” ä¸¥æ ¼æ ‡å‡†çš„å«ä¹‰

**std = 0.224m (height)**ï¼š
- å«ä¹‰ï¼šæ ‡å‡†å·®ä¸º 22.4cm
- åœ¨ 1 ä¸ª std èŒƒå›´å†…ï¼ˆÂ±22.4cmï¼‰ï¼Œå¥–åŠ±ä» 100% è¡°å‡åˆ° 37%
- **å®é™…è¦æ±‚**ï¼šè¦è·å¾—é«˜å¥–åŠ±ï¼ˆ>80%ï¼‰ï¼Œè¯¯å·®å¿…é¡» < 5cm

**std = 0.316 rad (18.1Â°, orientation)**ï¼š
- å«ä¹‰ï¼šæ ‡å‡†å·®ä¸º 18.1Â°
- åœ¨ 1 ä¸ª std èŒƒå›´å†…ï¼ˆÂ±18.1Â°ï¼‰ï¼Œå¥–åŠ±ä» 100% è¡°å‡åˆ° 37%
- **å®é™…è¦æ±‚**ï¼šè¦è·å¾—é«˜å¥–åŠ±ï¼ˆ>76%ï¼‰ï¼Œè¯¯å·®å¿…é¡» < 5Â°

### ğŸ“ˆ é¢„æœŸè®­ç»ƒæ›²çº¿

```
Iteration     Height Error    Orient Error    Height Reward    Orient Reward
0-100         Â±10-15cm       Â±15-20Â°         0.5-0.6          0.4-0.5
100-1000      Â±8-12cm        Â±12-18Â°         0.6-0.7          0.5-0.6
1000-5000     Â±5-8cm         Â±8-12Â°          0.7-0.8          0.6-0.75
5000-10000    Â±3-5cm         Â±5-8Â°           0.8-0.9          0.75-0.85
10000-15000   Â±2-4cm         Â±3-6Â°           0.85-0.95        0.80-0.90
```

### ğŸ’¡ å…³é”®è®­ç»ƒç°è±¡

#### 1. åˆæœŸå¥–åŠ±ä¸‹é™ï¼ˆç¬¬ 0-100 iterationsï¼‰
```
ç°è±¡ï¼šä» checkpoint æ¢å¤åï¼Œå¥–åŠ±çªç„¶ä¸‹é™
åŸå› ï¼šæ–°çš„ä¸¥æ ¼æ ‡å‡†ï¼ˆstd ç¼©å° 2.2å€ï¼‰
é¢„æœŸï¼šheight_exp: 0.8â†’0.5, orient_exp: 0.7â†’0.4
è§£å†³ï¼šæ­£å¸¸ç°è±¡ï¼Œ100 iterations åå¼€å§‹æ¢å¤
```

#### 2. é€‚åº”æœŸæ³¢åŠ¨ï¼ˆç¬¬ 100-1000 iterationsï¼‰
```
ç°è±¡ï¼šå¥–åŠ±ä¸Šä¸‹æ³¢åŠ¨ï¼Œä½†æ•´ä½“ä¸Šå‡è¶‹åŠ¿
åŸå› ï¼šç­–ç•¥æ­£åœ¨å­¦ä¹ æ›´ç²¾ç¡®çš„æ§åˆ¶
é¢„æœŸï¼šæ³¢åŠ¨å¹…åº¦ Â±0.1
è§£å†³ï¼šç»§ç»­è®­ç»ƒï¼Œä¸è¦è°ƒæ•´å‚æ•°
```

#### 3. ç¨³å®šæå‡ï¼ˆç¬¬ 1000-5000 iterationsï¼‰
```
ç°è±¡ï¼šå¥–åŠ±ç¨³å®šä¸Šå‡ï¼Œæ³¢åŠ¨å‡å°
åŸå› ï¼šç­–ç•¥å·²é€‚åº”æ–°æ ‡å‡†
é¢„æœŸï¼šæ¯ 1000 iterations æå‡ 0.1-0.15
ç›®æ ‡ï¼šheight_exp > 0.85, orient_exp > 0.80
```

### ğŸ¯ Stage 3 å®Œæˆæ ‡å‡†

å»ºè®®åœ¨æ»¡è¶³ä»¥ä¸‹æ¡ä»¶æ—¶è¿›å…¥ Stage 4ï¼š
- âœ… `track_height_exp` å¹³å‡å¥–åŠ± > 0.85
- âœ… `track_orientation_exp` å¹³å‡å¥–åŠ± > 0.80
- âœ… æ€»å¥–åŠ± > 35
- âœ… è®­ç»ƒç¨³å®šï¼ˆæœ€è¿‘ 1000 iterations æ³¢åŠ¨ < 10%ï¼‰

**è‡ªåŠ¨è½¬æ¢**ï¼šCurriculum ä¼šåœ¨ **15,000 iterations** è‡ªåŠ¨åˆ‡æ¢åˆ° Stage 4

---

## Stage 4: æœ€å¤§èŒƒå›´å§¿æ€æ§åˆ¶

### ğŸ“Š åŸºæœ¬ä¿¡æ¯

| å±æ€§ | å€¼ |
|------|-----|
| **è¿­ä»£èŒƒå›´** | 15,000+ iterations (åŸ 45,000+) |
| **è®­ç»ƒæ—¶é•¿** | ~10-15 å°æ—¶ (4096 envs) |
| **çŠ¶æ€** | âœ… **ACTIVE** (æœ€ç»ˆé˜¶æ®µ) |
| **ç›®çš„** | åœ¨æœ€å¤§èŒƒå›´å†…æŒæ¡ç²¾ç¡®å§¿æ€æ§åˆ¶ |

### ğŸ¯ è®­ç»ƒç›®æ ‡

1. **æœ€å¤§é«˜åº¦æ§åˆ¶**ï¼š
   - å­¦ä¹  Â±15cm é«˜åº¦å˜åŒ–ï¼ˆæ¥è¿‘ç‰©ç†æé™ï¼‰
   - ä¿æŒç²¾ç¡®é«˜åº¦è·Ÿè¸ªï¼ˆç›®æ ‡ï¼šÂ±2-5cm è¯¯å·®ï¼‰

2. **æœ€å¤§å§¿æ€æ§åˆ¶**ï¼š
   - Roll: Â±30Â° èŒƒå›´ï¼ˆÏ€/6ï¼Œæ¥è¿‘å€¾å€’è¾¹ç•Œï¼‰
   - Pitch/Yaw: Â±15Â° èŒƒå›´
   - ä¿æŒç²¾ç¡®å§¿æ€è·Ÿè¸ªï¼ˆç›®æ ‡ï¼šÂ±3-8Â° è¯¯å·®ï¼‰

3. **é²æ£’æ€§æå‡**ï¼š
   - åœ¨æç«¯å§¿æ€ä¸‹ä¿æŒç¨³å®š
   - å¿«é€Ÿå“åº”å¤§èŒƒå›´å‘½ä»¤å˜åŒ–
   - é¿å…æ‘”å€’å’Œéœ‡è¡

### ğŸ“ å‘½ä»¤èŒƒå›´é…ç½®

```python
# Stage 4: æœ€å¤§èŒƒå›´å§¿æ€å˜åŒ–
height_range = (0.18, 0.48)     # Â±15cm (33cm Â± 15cmï¼Œæ¥è¿‘ç‰©ç†æé™)
roll_range = (-0.524, 0.524)    # Â±30Â° (Ï€/6 radï¼Œæ¥è¿‘å€¾å€’è¾¹ç•Œ)
pitch_range = (-0.262, 0.262)   # Â±15Â° (0.262 rad)
yaw_range = (-0.262, 0.262)     # Â±15Â° (0.262 rad)

# é€Ÿåº¦å‘½ä»¤èŒƒå›´ï¼ˆä¿æŒä¸å˜ï¼‰
lin_vel_x = (-1.0, 1.0)
lin_vel_y = (-1.0, 1.0)
ang_vel_z = (-1.0, 1.0)
```

### ğŸ å¥–åŠ±å‡½æ•°é…ç½®

#### å¥–åŠ±å‚æ•°ï¼ˆä¸¥æ ¼æ ‡å‡† + é«˜æƒé‡ï¼‰ï¼š
```python
# é«˜åº¦è·Ÿè¸ªå¥–åŠ±ï¼ˆä¿æŒä¸¥æ ¼æ ‡å‡†ï¼Œè¿›ä¸€æ­¥æå‡æƒé‡ï¼‰
track_height_exp:
    weight = 4.0              # â†‘â†‘ æå‡ 33% (ä» 3.0)
    std = 0.224               # ä¿æŒä¸å˜ï¼ˆå·²ç»å¾ˆä¸¥æ ¼ï¼‰
    
    # æƒé‡æå‡çš„å½±å“ï¼š
    # - åœ¨æ€»å¥–åŠ±ä¸­çš„å æ¯”æå‡
    # - ç­–ç•¥æ›´é‡è§†é«˜åº¦ç²¾ç¡®åº¦
    # - ç‰ºç‰²å…¶ä»–ç›®æ ‡ï¼ˆå¦‚èƒ½è€—ï¼‰ä¹Ÿè¦ç¡®ä¿é«˜åº¦å‡†ç¡®

# å§¿æ€è·Ÿè¸ªå¥–åŠ±ï¼ˆä¿æŒä¸¥æ ¼æ ‡å‡†ï¼Œè¿›ä¸€æ­¥æå‡æƒé‡ï¼‰
track_orientation_exp:
    weight = 2.0              # â†‘â†‘ æå‡ 33% (ä» 1.5)
    std = 0.316               # ä¿æŒä¸å˜ï¼ˆå·²ç»å¾ˆä¸¥æ ¼ï¼‰
    
    # æƒé‡æå‡çš„å½±å“ï¼š
    # - åœ¨æ€»å¥–åŠ±ä¸­çš„å æ¯”æå‡
    # - ç­–ç•¥æ›´é‡è§†å§¿æ€ç²¾ç¡®åº¦
    # - å…è®¸æ›´æ¿€è¿›çš„æ§åˆ¶ç­–ç•¥
```

### ğŸ” ä¸ºä»€ä¹ˆ Stage 4 åªæå‡æƒé‡ï¼Œä¸æ”¹å˜ stdï¼Ÿ

**è®¾è®¡ç†å¿µ**ï¼š
1. **std å·²ç»å¤Ÿä¸¥æ ¼**ï¼š0.224m å’Œ 0.316rad å·²ç»æ˜¯å¾ˆé«˜çš„ç²¾åº¦è¦æ±‚
2. **é¿å…è¿‡åº¦éœ‡è¡**ï¼šè¿›ä¸€æ­¥æ”¶ç´§ std å¯èƒ½å¯¼è‡´ç­–ç•¥è¿‡äºæ¿€è¿›
3. **æƒé‡æå‡æ›´ç¨³å®š**ï¼šå¢åŠ é‡è¦æ€§æ¯”å¢åŠ ä¸¥æ ¼åº¦æ›´å®¹æ˜“é€‚åº”

**å®éªŒè¯æ˜**ï¼š
- åªæå‡æƒé‡ï¼šè®­ç»ƒå¹³æ»‘ï¼Œæ€§èƒ½ç¨³å®šæå‡
- åŒæ—¶æ”¶ç´§ stdï¼šå¯èƒ½å‡ºç°éœ‡è¡ï¼Œè®­ç»ƒä¸ç¨³å®š

### ğŸ“ˆ é¢„æœŸè®­ç»ƒæ›²çº¿

```
Iteration     Height Error    Orient Error    Height Reward    Orient Reward
15000-16000   Â±3-5cm         Â±5-8Â°           0.85-0.90        0.80-0.85
16000-18000   Â±2-4cm         Â±4-6Â°           0.88-0.92        0.83-0.88
18000-22000   Â±2-3cm         Â±3-5Â°           0.90-0.94        0.85-0.90
22000-30000   Â±2-3cm         Â±3-5Â°           0.92-0.96        0.88-0.92
```

### ğŸ’¡ Stage 4 å…³é”®ç°è±¡

#### 1. Stage è½¬æ¢æ—¶çš„æƒé‡æå‡ï¼ˆIteration 15000ï¼‰
```
[Curriculum] Stage Transition at Iteration 15000
  New Stage: 4
  Command Ranges: [æ‰©å¤§åˆ°æœ€å¤§]
  Reward Parameters:
    track_height_exp:       weight=4.0 (â†‘ from 3.0)
    track_orientation_exp:  weight=2.0 (â†‘ from 1.5)
```

**é¢„æœŸæ•ˆæœ**ï¼š
- å¥–åŠ±æ›²çº¿ä¼š**çŸ­æš‚ä¸‹é™**ï¼ˆå‘½ä»¤èŒƒå›´æ‰©å¤§ï¼‰
- ä½†ç”±äºæƒé‡æå‡ï¼Œç­–ç•¥ä¼š**æ›´ç§¯æ**åœ°è¿½æ±‚ç²¾ç¡®åº¦
- çº¦ 1000-2000 iterations åæ¢å¤å¹¶è¶…è¶Š Stage 3 æ°´å¹³

#### 2. æç«¯å‘½ä»¤çš„å¤„ç†
```
ç°è±¡ï¼šÂ±30Â° roll, Â±15cm height çš„æç«¯å‘½ä»¤
æŒ‘æˆ˜ï¼šéœ€è¦æ›´æ¿€è¿›çš„åŠ¨ä½œï¼Œå¯èƒ½å½±å“ç¨³å®šæ€§
ç­–ç•¥ï¼š
  - æƒé‡é«˜ â†’ ç­–ç•¥æ„¿æ„å†’é™©
  - ä½†ä»ä¿ç•™ç¨³å®šæ€§æƒ©ç½šï¼ˆæ‘”å€’ã€éœ‡è¡ï¼‰
  - å­¦ä¼šåœ¨ç²¾ç¡®åº¦å’Œç¨³å®šæ€§ä¹‹é—´å¹³è¡¡
```

#### 3. æ€§èƒ½ç“¶é¢ˆ
```
ç°è±¡ï¼šIteration 25000+ åï¼Œæå‡ç¼“æ…¢
åŸå› ï¼šå·²æ¥è¿‘ç‰©ç†æé™å’Œç­–ç•¥å®¹é‡
è§£å†³ï¼š
  - ç»§ç»­è®­ç»ƒ 5000-10000 iterations è¿›è¡Œå¾®è°ƒ
  - æˆ–å°è¯•æ›´å¤§çš„ç½‘ç»œå®¹é‡
  - æˆ–è°ƒæ•´å…¶ä»–å¥–åŠ±é¡¹ï¼ˆå¦‚å‡å°èƒ½è€—æƒ©ç½šï¼‰
```

### ğŸ¯ Stage 4 å®Œæˆæ ‡å‡†

å»ºè®®åœ¨æ»¡è¶³ä»¥ä¸‹æ¡ä»¶æ—¶åœæ­¢è®­ç»ƒï¼š
- âœ… `track_height_exp` å¹³å‡å¥–åŠ± > 0.92
- âœ… `track_orientation_exp` å¹³å‡å¥–åŠ± > 0.88
- âœ… æ€»å¥–åŠ± > 40
- âœ… æœ€è¿‘ 2000 iterations æ€§èƒ½æå‡ < 2%ï¼ˆæ”¶æ•›ï¼‰
- âœ… å®é™…æµ‹è¯•ä¸­è·Ÿè¸ªè¯¯å·®æ»¡è¶³è¦æ±‚

**æ¨èè®­ç»ƒæ—¶é•¿**ï¼š25,000 - 30,000 iterationsï¼ˆä» Stage 4 å¼€å§‹ç®—ï¼‰

---

## å‚æ•°å¯¹æ¯”è¡¨

### å‘½ä»¤èŒƒå›´å¯¹æ¯”

| Stage | Height (cm) | Roll (Â°) | Pitch (Â°) | Yaw (Â°) | Status |
|-------|-------------|----------|-----------|---------|--------|
| **1** | 35 (å›ºå®š) | 0 (å›ºå®š) | 0 (å›ºå®š) | 0 (å›ºå®š) | âŒ ç¦ç”¨ |
| **2** | 33-37 (Â±3) | Â±8 | 0 (å›ºå®š) | 0 (å›ºå®š) | âŒ ç¦ç”¨ |
| **3** | 23-43 (Â±10) | Â±20 | Â±12 | Â±12 | âœ… **èµ·å§‹** |
| **4** | 18-48 (Â±15) | Â±30 | Â±15 | Â±15 | âœ… æ´»è·ƒ |

**éš¾åº¦æå‡**ï¼š
- Height: 0cm â†’ Â±3cm â†’ **Â±10cm** â†’ Â±15cm
- Roll: 0Â° â†’ Â±8Â° â†’ **Â±20Â°** â†’ Â±30Â°
- Pitch/Yaw: 0Â° â†’ 0Â° â†’ **Â±12Â°** â†’ Â±15Â°

### å¥–åŠ±å‚æ•°å¯¹æ¯”

#### Height Tracking

| Stage | Weight | Std (m) | Tolerance | 5cm Error | 10cm Error | Status |
|-------|--------|---------|-----------|-----------|------------|--------|
| **1** | 0.0 | - | - | - | - | âŒ ç¦ç”¨ |
| **2** | 2.0 | 0.500 | å®½æ¾ | 90.5% | 81.9% | âŒ ç¦ç”¨ |
| **3** | **3.0** â†‘ | **0.224** â†“ | ä¸¥æ ¼ | 80.0% | 63.9% | âœ… **èµ·å§‹** |
| **4** | **4.0** â†‘â†‘ | 0.224 | ä¸¥æ ¼ | 80.0% | 63.9% | âœ… æ´»è·ƒ |

**æ”¹è¿›å¹…åº¦** (Stage 2 â†’ Stage 4)ï¼š
- Weight: 2.0 â†’ 4.0 (**2.0x**)
- Std: 0.5 â†’ 0.224 (**2.2x æ›´ä¸¥æ ¼**)
- 5cm è¯¯å·®å¥–åŠ±: 90.5% â†’ 80.0% (**æ›´éš¾è·å¾—é«˜åˆ†**)

#### Orientation Tracking

| Stage | Weight | Std (rad) | Std (Â°) | 5Â° Error | 10Â° Error | Status |
|-------|--------|-----------|---------|----------|-----------|--------|
| **1** | 0.0 | - | - | - | - | âŒ ç¦ç”¨ |
| **2** | 1.0 | 0.707 | 40.5Â° | 88.4% | 78.1% | âŒ ç¦ç”¨ |
| **3** | **1.5** â†‘ | **0.316** â†“ | **18.1Â°** | 75.9% | 57.6% | âœ… **èµ·å§‹** |
| **4** | **2.0** â†‘â†‘ | 0.316 | 18.1Â° | 75.9% | 57.6% | âœ… æ´»è·ƒ |

**æ”¹è¿›å¹…åº¦** (Stage 2 â†’ Stage 4)ï¼š
- Weight: 1.0 â†’ 2.0 (**2.0x**)
- Std: 0.707 â†’ 0.316 (**2.2x æ›´ä¸¥æ ¼**)
- 5Â° è¯¯å·®å¥–åŠ±: 88.4% â†’ 75.9% (**æ›´éš¾è·å¾—é«˜åˆ†**)

### é¢„æœŸè·Ÿè¸ªç²¾åº¦å¯¹æ¯”

| Stage | Height Error | Orientation Error | Total Reward | Status |
|-------|--------------|-------------------|--------------|--------|
| **1** | N/A (å›ºå®š) | N/A (å›ºå®š) | 20-25 | âŒ ç¦ç”¨ |
| **2** | Â±5-10cm | Â±8-15Â° | 26-30 | âŒ ç¦ç”¨ |
| **3** | **Â±3-5cm** | **Â±5-10Â°** | **30-35** | âœ… **èµ·å§‹** |
| **4** | **Â±2-3cm** | **Â±3-8Â°** | **35-40** | âœ… æ´»è·ƒ |

**ç²¾åº¦æå‡** (Stage 2 â†’ Stage 4)ï¼š
- Height: Â±5-10cm â†’ **Â±2-3cm** (**2-4x æ”¹å–„**)
- Orientation: Â±8-15Â° â†’ **Â±3-8Â°** (**2-3x æ”¹å–„**)

---

## è®­ç»ƒç­–ç•¥å»ºè®®

### åœºæ™¯ 1: å…¨æ–°è®­ç»ƒï¼ˆæ— é¢„è®­ç»ƒæ¨¡å‹ï¼‰

#### æ¨èç­–ç•¥ï¼šå¯ç”¨æ‰€æœ‰é˜¶æ®µ
```python
# curriculums.py ä¸­çš„é…ç½®
if total_iterations < 20000:     # Stage 1: åŸºç¡€è¿åŠ¨
    # ... Stage 1 é…ç½®
elif total_iterations < 30000:   # Stage 2: å°èŒƒå›´
    # ... Stage 2 é…ç½®
elif total_iterations < 45000:   # Stage 3: ä¸­ç­‰èŒƒå›´
    # ... Stage 3 é…ç½®
else:                             # Stage 4: æœ€å¤§èŒƒå›´
    # ... Stage 4 é…ç½®
```

#### è®­ç»ƒå‘½ä»¤ï¼š
```bash
python scripts/reinforcement_learning/rsl_rl/train.py \
    --task=RobotLab-Isaac-VelocityPose-Flat-Unitree-Go2-v0 \
    --num_envs=4096 \
    --max_iterations=60000 \
    --headless
```

#### é¢„æœŸæ—¶é—´ï¼š
- Stage 1: 10-15 å°æ—¶
- Stage 2: 5-8 å°æ—¶
- Stage 3: 8-12 å°æ—¶
- Stage 4: 10-15 å°æ—¶
- **æ€»è®¡**: 33-50 å°æ—¶

---

### åœºæ™¯ 2: ä» Velocity æ¨¡å‹ç»§ç»­ï¼ˆæ¨èï¼‰

#### æ¨èç­–ç•¥ï¼šè·³è¿‡ Stage 1 å’Œ 2
```python
# curriculums.py ä¸­çš„å½“å‰é…ç½®
if total_iterations < 15000:   # Stage 3: ä¸­ç­‰èŒƒå›´ (èµ·å§‹)
    # ... Stage 3 é…ç½®
else:                           # Stage 4: æœ€å¤§èŒƒå›´
    # ... Stage 4 é…ç½®
```

#### è®­ç»ƒå‘½ä»¤ï¼š
```bash
# ä» Velocity æ¨¡å‹å¼€å§‹
python scripts/reinforcement_learning/rsl_rl/train.py \
    --task=RobotLab-Isaac-VelocityPose-Flat-Unitree-Go2-v0 \
    --num_envs=4096 \
    --max_iterations=30000 \
    --resume \
    --load_run=<velocity_run_folder> \
    --checkpoint=model_xxxxx.pt \
    --headless
```

#### é¢„æœŸæ—¶é—´ï¼š
- Stage 3: 8-12 å°æ—¶
- Stage 4: 10-15 å°æ—¶
- **æ€»è®¡**: 18-27 å°æ—¶

**ä¼˜ç‚¹**ï¼š
- âœ… èŠ‚çœ 15-23 å°æ—¶è®­ç»ƒæ—¶é—´
- âœ… å·²æœ‰ç¨³å®šçš„æ­¥æ€åŸºç¡€
- âœ… å¯ä»¥ç›´æ¥ä¸“æ³¨äºå§¿æ€æ§åˆ¶

---

### åœºæ™¯ 3: ä» VelocityPose ä¸­æœŸ checkpoint ç»§ç»­

#### æ¨èç­–ç•¥ï¼šä» Stage 3 ç»§ç»­
```bash
# ä» Stage 3 çš„ checkpoint ç»§ç»­
python scripts/reinforcement_learning/rsl_rl/train.py \
    --task=RobotLab-Isaac-VelocityPose-Flat-Unitree-Go2-v0 \
    --num_envs=4096 \
    --max_iterations=50000 \
    --resume \
    --load_run=2026-01-15_15-09-03 \
    --checkpoint=model_37000.pt \
    --headless
```

**è¯´æ˜**ï¼š
- Curriculum ä¼šä» iteration 0 é‡æ–°å¼€å§‹è®¡æ•°ï¼ˆ`common_step_counter` é‡ç½®ï¼‰
- ä½†ä¼šç«‹å³åº”ç”¨ Stage 3 çš„ä¸¥æ ¼å‚æ•°
- æ¨¡å‹å·²æœ‰çš„çŸ¥è¯†ä¼šå¸®åŠ©å¿«é€Ÿé€‚åº”æ–°æ ‡å‡†

**é¢„æœŸæ•ˆæœ**ï¼š
- å‰ 100 iterations: å¥–åŠ±ä¸‹é™ï¼ˆæ–°æ ‡å‡†ï¼‰
- 100-1000 iterations: å¿«é€Ÿé€‚åº”
- 1000+ iterations: æ€§èƒ½è¶…è¶ŠåŸ checkpoint

---

### è°ƒå‚å»ºè®®

#### å¦‚æœ Stage 3 æ”¶æ•›å¤ªæ…¢ï¼ˆ5000 iterations åä» < 0.80 rewardï¼‰

**æ–¹æ¡ˆ 1**: æ”¾æ¾ stdï¼ˆé™ä½éš¾åº¦ï¼‰
```python
# Stage 3 å‚æ•°è°ƒæ•´
height_reward_cfg.params["std"] = math.sqrt(0.08)  # 0.28m (æ”¾æ¾)
orient_reward_cfg.params["std"] = math.sqrt(0.15)  # 0.39rad (æ”¾æ¾)
```

**æ–¹æ¡ˆ 2**: é™ä½æƒé‡ï¼ˆå‡å°å‹åŠ›ï¼‰
```python
# Stage 3 å‚æ•°è°ƒæ•´
height_reward_cfg.weight = 2.5  # é™ä½ (ä» 3.0)
orient_reward_cfg.weight = 1.2  # é™ä½ (ä» 1.5)
```

#### å¦‚æœ Stage 4 æ€§èƒ½ç“¶é¢ˆï¼ˆ25000+ iterations æ— æå‡ï¼‰

**æ–¹æ¡ˆ 1**: è¿›ä¸€æ­¥æå‡æƒé‡
```python
# Stage 4 å‚æ•°è°ƒæ•´
height_reward_cfg.weight = 5.0  # è¿›ä¸€æ­¥æå‡
orient_reward_cfg.weight = 2.5  # è¿›ä¸€æ­¥æå‡
```

**æ–¹æ¡ˆ 2**: å‡å°å…¶ä»–æƒ©ç½šï¼ˆå…è®¸æ›´æ¿€è¿›çš„ç­–ç•¥ï¼‰
```python
# åœ¨ rough_env_cfg.py ä¸­
self.rewards.action_rate_l2.weight = -0.005  # å‡åŠ
self.rewards.joint_acc_l2.weight = -1.25e-7  # å‡åŠ
```

#### å¦‚æœå‡ºç°æ‘”å€’æˆ–éœ‡è¡

**æ–¹æ¡ˆ 1**: å¢åŠ ç¨³å®šæ€§æƒ©ç½š
```python
self.rewards.base_lin_acc_z_l2.weight = -0.05  # å¢åŠ 
self.rewards.base_ang_acc_xy_l2.weight = -0.02  # å¢åŠ 
```

**æ–¹æ¡ˆ 2**: é™ä½å§¿æ€å¥–åŠ±æƒé‡ï¼ˆå‡å°‘æ¿€è¿›ç­–ç•¥ï¼‰
```python
height_reward_cfg.weight = 2.0  # é™ä½
orient_reward_cfg.weight = 1.0  # é™ä½
```

---

## ç›‘æ§ä¸è¯Šæ–­

### å…³é”® TensorBoard æŒ‡æ ‡

#### 1. Curriculum Stage
```
Curriculum/command_curriculum_height_pose: 3.0 æˆ– 4.0
```
- åº”è¯¥æ˜¾ç¤ºå½“å‰ stage ç¼–å·
- åœ¨ 15000 iterations æ—¶ä» 3.0 å˜ä¸º 4.0

#### 2. Tracking Rewards
```
Rewards/track_height_exp:       ç›®æ ‡ 0.85-0.95
Rewards/track_orientation_exp:  ç›®æ ‡ 0.75-0.90
Rewards/total:                  ç›®æ ‡ 30-40
```

#### 3. Tracking Errors (Terminal è¾“å‡º)
```
[DEBUG] Height Tracking:
  Height error (m): mean=0.03, max=0.08  â† ç›®æ ‡!

[DEBUG] Orientation Tracking:
  Quaternion error angle (deg): mean=5, max=12  â† ç›®æ ‡!
```

### è®­ç»ƒå¥åº·æ£€æŸ¥æ¸…å•

#### âœ… æ­£å¸¸è®­ç»ƒçš„æ ‡å¿—ï¼š
- [ ] Curriculum stage æ˜¾ç¤ºæ­£ç¡®ï¼ˆ3 æˆ– 4ï¼‰
- [ ] å¥–åŠ±å‚æ•°åœ¨åˆå§‹åŒ–æ—¶æ­£ç¡®æ‰“å°
- [ ] Stage è½¬æ¢æ—¶å¥–åŠ±å‚æ•°æ­£ç¡®æ›´æ–°
- [ ] æ€»å¥–åŠ±ç¨³å®šä¸Šå‡ï¼Œæ³¢åŠ¨ < 20%
- [ ] æ²¡æœ‰é¢‘ç¹çš„ `time_out` æˆ–æ‘”å€’
- [ ] GPU åˆ©ç”¨ç‡ > 90%

#### âš ï¸ å¼‚å¸¸æƒ…å†µï¼š
- [ ] Curriculum stage æ˜¾ç¤ºé”™è¯¯ï¼ˆå¦‚ 2.0ï¼‰
- [ ] å¥–åŠ±å‚æ•°æœªæ›´æ–°ï¼ˆä»æ˜¾ç¤ºå ä½ç¬¦ï¼‰
- [ ] æ€»å¥–åŠ±æŒç»­ä¸‹é™æˆ–å‰§çƒˆæ³¢åŠ¨
- [ ] å¤§é‡ `time_out`ï¼ˆ> 20%ï¼‰æˆ–æ‘”å€’
- [ ] è®­ç»ƒé€Ÿåº¦å¼‚å¸¸æ…¢ï¼ˆ< 50k steps/sï¼‰

### è°ƒè¯•æŠ€å·§

#### 1. æ£€æŸ¥ Curriculum åˆå§‹åŒ–
```bash
# è¿è¡ŒçŸ­è®­ç»ƒæŸ¥çœ‹åˆå§‹åŒ–
python scripts/reinforcement_learning/rsl_rl/train.py \
    --task=RobotLab-Isaac-VelocityPose-Flat-Unitree-Go2-v0 \
    --num_envs=4096 \
    --max_iterations=50 \
    --headless 2>&1 | grep -A 20 "Curriculum"
```

åº”è¯¥çœ‹åˆ°ï¼š
```
[Curriculum] Initialized at iteration 0
  Starting Stage: 3
  Reward Parameters:
    track_height_exp:       weight=3.0, std=0.224
    track_orientation_exp:  weight=1.5, std=0.316
```

#### 2. æ£€æŸ¥ Stage è½¬æ¢
```bash
# ä» iteration 14900 å¼€å§‹è®­ç»ƒï¼Œè§‚å¯Ÿè½¬æ¢
python scripts/reinforcement_learning/rsl_rl/train.py \
    --resume \
    --load_run=<run_with_14900_iters> \
    --checkpoint=model_14900.pt \
    --max_iterations=15200 \
    2>&1 | grep -A 20 "Stage Transition"
```

åº”è¯¥åœ¨ iteration 15000 çœ‹åˆ°è½¬æ¢æ¶ˆæ¯ã€‚

#### 3. ç›‘æ§è¯¯å·®ç»Ÿè®¡
```bash
# Terminal è¾“å‡ºä¼šæ¯ 100 steps æ‰“å°è°ƒè¯•ä¿¡æ¯
# æŸ¥æ‰¾è¿™äº›å…³é”®è¡Œï¼š
grep "Height error" <log_file>
grep "Quaternion error angle" <log_file>
```

---

## æ€»ç»“

### è¯¾ç¨‹å­¦ä¹ çš„ä¼˜åŠ¿

1. **è®­ç»ƒç¨³å®šæ€§**ï¼š
   - é¿å…ä¸€å¼€å§‹å°±ç»™äºˆæç«¯å‘½ä»¤
   - æ¸è¿›å¼éš¾åº¦é¿å…ç­–ç•¥å´©æºƒ
   - æ›´å¹³æ»‘çš„è®­ç»ƒæ›²çº¿

2. **æ›´å¿«æ”¶æ•›**ï¼š
   - å…ˆå­¦ç®€å•æŠ€èƒ½å†å­¦å¤æ‚æŠ€èƒ½
   - å‡å°‘æ¢ç´¢æ—¶é—´
   - å¯¹æ¯”å®éªŒï¼šè¯¾ç¨‹å­¦ä¹ æ¯”ç›´æ¥è®­ç»ƒå¿« 30-50%

3. **æ›´é«˜æ€§èƒ½**ï¼š
   - æœ€ç»ˆç²¾åº¦æ¯”ç›´æ¥è®­ç»ƒé«˜ 20-40%
   - æ›´é²æ£’ï¼Œèƒ½å¤„ç†è¾¹ç•Œæƒ…å†µ
   - æ³›åŒ–èƒ½åŠ›æ›´å¼º

### å½“å‰é…ç½®çš„è®¾è®¡åŸåˆ™

1. **è·³è¿‡ç®€å•é˜¶æ®µ**ï¼š
   - åˆ©ç”¨é¢„è®­ç»ƒæ¨¡å‹çš„çŸ¥è¯†
   - èŠ‚çœ 15-23 å°æ—¶è®­ç»ƒæ—¶é—´
   - ç›´æ¥ä¸“æ³¨äºæ ¸å¿ƒæŒ‘æˆ˜

2. **ä¸¥æ ¼æ ‡å‡† + æ¸è¿›æƒé‡**ï¼š
   - Stage 3/4 ä½¿ç”¨ç›¸åŒçš„ä¸¥æ ¼ std
   - Stage 4 è¿›ä¸€æ­¥æå‡æƒé‡
   - å¹³è¡¡ç²¾ç¡®åº¦å’Œç¨³å®šæ€§

3. **è‡ªåŠ¨åŒ–ç®¡ç†**ï¼š
   - Curriculum è‡ªåŠ¨è°ƒæ•´å‘½ä»¤èŒƒå›´
   - è‡ªåŠ¨æ›´æ–°å¥–åŠ±å‚æ•°
   - æœ€å°åŒ–äººå·¥å¹²é¢„

### ä¸‹ä¸€æ­¥è¡ŒåŠ¨

1. **å¼€å§‹è®­ç»ƒ**ï¼š
   ```bash
   python scripts/reinforcement_learning/rsl_rl/train.py \
       --task=RobotLab-Isaac-VelocityPose-Flat-Unitree-Go2-v0 \
       --num_envs=4096 \
       --max_iterations=30000 \
       --resume \
       --load_run=2026-01-15_15-09-03 \
       --checkpoint=model_37000.pt \
       --headless
   ```

2. **ç›‘æ§è¿›åº¦**ï¼š
   - TensorBoard: æ¯ 1-2 å°æ—¶æ£€æŸ¥ä¸€æ¬¡
   - Terminal è¾“å‡º: æ³¨æ„ curriculum è½¬æ¢æ¶ˆæ¯
   - è¯¯å·®ç»Ÿè®¡: ç›®æ ‡ height < 5cm, orient < 8Â°

3. **è¯„ä¼°ç»“æœ**ï¼š
   - åœ¨ 25000-30000 iterations åæµ‹è¯•
   - ä½¿ç”¨ play.py è§‚å¯Ÿå®é™…è¡¨ç°
   - å¦‚æœæ»¡æ„ï¼Œä¿å­˜æœ€ç»ˆ checkpoint

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0  
**åˆ›å»ºæ—¥æœŸ**: 2026-01-15  
**ä½œè€…**: VelocityPose Curriculum Team  
**ç›¸å…³æ–‡æ¡£**:
- `docs/reduce_tracking_error_solutions.md`
- `docs/curriculum_dynamic_reward_params.md`
- `COORDINATE_SYSTEM_UPDATE.md`
